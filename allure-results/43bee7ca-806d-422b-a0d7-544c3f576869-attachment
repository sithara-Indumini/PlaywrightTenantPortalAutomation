# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Element Visual comparison in playwright2
- Location: C:\WorkDirectory\tests\Chapter03\06_VisualTesting_Test.spec.ts:13:7

# Error details

```
Error: expect(page).toHaveScreenshot(expected)

  155673 pixels (ratio 0.17 of all image pixels) are different.

Expected: C:\WorkDirectory\tests\Chapter03\06_VisualTesting_Test.spec.ts-snapshots\GitHubLoginPage-firefox-win32.png
Received: C:\WorkDirectory\test-results\Chapter03-06_VisualTesting-72b38-l-comparison-in-playwright2-firefox\GitHubLoginPage-actual.png
    Diff: C:\WorkDirectory\test-results\Chapter03-06_VisualTesting-72b38-l-comparison-in-playwright2-firefox\GitHubLoginPage-diff.png

Call log:
  - expect.toHaveScreenshot(GitHubLoginPage.png) with timeout 10000ms
    - verifying given screenshot expectation
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - 154660 pixels (ratio 0.17 of all image pixels) are different.
  - waiting 100ms before taking screenshot
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - 2792 pixels (ratio 0.01 of all image pixels) are different.
  - waiting 250ms before taking screenshot
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - captured a stable screenshot
  - 155673 pixels (ratio 0.17 of all image pixels) are different.

    at C:\WorkDirectory\tests\Chapter03\06_VisualTesting_Test.spec.ts:19:24
```

# Page snapshot

```yaml
- link "Skip to content"
- banner:
  - link "Homepage"
- main:
  - heading "Sign in to GitHub" [level=1]
  - text: Username or email address
  - textbox "Username or email address"
  - text: Password
  - textbox "Password"
  - link "Forgot password?"
  - button "Sign in"
  - heading "Password login alternatives" [level=2]
  - paragraph:
    - button "Sign in with a passkey"
  - paragraph:
    - text: New to GitHub?
    - link "Create an account"
- contentinfo:
  - list:
    - listitem:
      - link "Terms"
    - listitem:
      - link "Privacy"
    - listitem:
      - link "Docs"
    - listitem:
      - link "Contact GitHub Support"
    - listitem:
      - button "Manage cookies"
    - listitem:
      - button "Do not share my personal information"
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test'
   2 |
   3 | /*test('Visual comparison in playwright', async ({ page }) => {
   4 |
   5 |   await page.goto('https://github.com/login');
   6 |   await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.1 });
   7 |   await page.getByRole('textbox', { name: 'Username or email address' }).fill('playwright with typescript');
   8 |   await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.1 });*/
   9 |
  10 |
  11 |
  12 |
  13 |   test('Element Visual comparison in playwright2', async ({ page }) => {
  14 |
  15 |     await page.goto('https://github.com/login');
  16 |     
  17 |     //  await page.getByRole('textbox', { name: 'Username or email address' }).fill('playwright with typescript');
  18 |     // await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.1 });
> 19 |     await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.2 });
     |                        ^ Error: expect(page).toHaveScreenshot(expected)
  20 |     const element = page.locator('[class="auth-form-body mt-3"]');
  21 |     await expect(element).toHaveScreenshot('GitHubLoginForm.png', { threshold: 0.1 });
  22 |     await page.locator('#login_field').fill('Playwright with typescript');
  23 |     await expect(element).toHaveScreenshot('GitHubLoginForm.png', { threshold: 0.1 });
  24 |
  25 |   });
  26 |
  27 |
  28 | //});
  29 |
  30 |
  31 |
```