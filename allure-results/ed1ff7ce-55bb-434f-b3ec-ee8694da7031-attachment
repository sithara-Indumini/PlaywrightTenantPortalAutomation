# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Element Visual comparison in playwright
- Location: C:\WorkDirectory\tests\Chapter03\06_VisualTesting_Test.spec.ts:13:7

# Error details

```
Error: expect(locator).toHaveScreenshot(expected)

  Expected an image 288px by 218px, received 288px by 220px. 1953 pixels (ratio 0.04 of all image pixels) are different.

Expected: C:\WorkDirectory\tests\Chapter03\06_VisualTesting_Test.spec.ts-snapshots\GitHubLoginForm-firefox-win32.png
Received: C:\WorkDirectory\test-results\Chapter03-06_VisualTesting-9c148-al-comparison-in-playwright-firefox\GitHubLoginForm-actual.png
    Diff: C:\WorkDirectory\test-results\Chapter03-06_VisualTesting-9c148-al-comparison-in-playwright-firefox\GitHubLoginForm-diff.png

Call log:
  - expect.toHaveScreenshot(GitHubLoginForm.png) with timeout 10000ms
    - verifying given screenshot expectation
  - waiting for locator('[class="auth-form-body mt-3"]')
    - locator resolved to <div class="auth-form-body mt-3">…</div>
  - taking element screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - attempting scroll into view action
    - waiting for element to be stable
  - Expected an image 288px by 218px, received 288px by 220px. 1953 pixels (ratio 0.04 of all image pixels) are different.
  - waiting 100ms before taking screenshot
  - waiting for locator('[class="auth-form-body mt-3"]')
    - locator resolved to <div class="auth-form-body mt-3">…</div>
  - taking element screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - attempting scroll into view action
    - waiting for element to be stable
  - captured a stable screenshot
  - Expected an image 288px by 218px, received 288px by 220px. 1953 pixels (ratio 0.04 of all image pixels) are different.

    at C:\WorkDirectory\tests\Chapter03\06_VisualTesting_Test.spec.ts:21:27
```

# Page snapshot

```yaml
- link "Skip to content"
- banner:
  - link "Homepage"
- main:
  - heading "Sign in to GitHub" [level=1]
  - text: Username or email address
  - textbox "Username or email address"
  - text: Password
  - textbox "Password"
  - link "Forgot password?"
  - button "Sign in"
  - heading "Password login alternatives" [level=2]
  - paragraph:
    - button "Sign in with a passkey"
  - paragraph:
    - text: New to GitHub?
    - link "Create an account"
- contentinfo:
  - list:
    - listitem:
      - link "Terms"
    - listitem:
      - link "Privacy"
    - listitem:
      - link "Docs"
    - listitem:
      - link "Contact GitHub Support"
    - listitem:
      - button "Manage cookies"
    - listitem:
      - button "Do not share my personal information"
- alert:
  - img
  - paragraph:
    - text: We use optional cookies to improve your experience on our websites and to display personalized advertising based on your online activity. If you reject optional cookies, only cookies necessary to provide you the services listed above will be used. You may change your selection on which cookies to accept by clicking "Manage Cookies" at the bottom of the page to change your selection. This selection is maintained for 180 days. Please review your selections regularly.
    - link "How to manage cookie preferences"
    - text: "|"
    - link "Privacy Statement"
    - text: "|"
    - link "Third-Party Cookies"
    - text: .
  - button "Accept"
  - button "Reject"
  - button "Manage cookies"
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test'
   2 |
   3 | /*test('Visual comparison in playwright', async ({ page }) => {
   4 |
   5 |   await page.goto('https://github.com/login');
   6 |   await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.1 });
   7 |   await page.getByRole('textbox', { name: 'Username or email address' }).fill('playwright with typescript');
   8 |   await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.1 });*/
   9 |
  10 |
  11 |
  12 |
  13 |   test('Element Visual comparison in playwright', async ({ page }) => {
  14 |
  15 |     await page.goto('https://github.com/login');
  16 |     
  17 |     //  await page.getByRole('textbox', { name: 'Username or email address' }).fill('playwright with typescript');
  18 |     // await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.1 });
  19 |    // await expect(page).toHaveScreenshot('GitHubLoginPage.png', { threshold: 0.2 });
  20 |     const element = page.locator('[class="auth-form-body mt-3"]');
> 21 |     await expect(element).toHaveScreenshot('GitHubLoginForm.png', { threshold: 0.2 });
     |                           ^ Error: expect(locator).toHaveScreenshot(expected)
  22 |     await page.locator('#login_field').fill('Playwright with typescript');
  23 |    // await expect(element).toHaveScreenshot('GitHubLoginForm.png', { threshold: 0.1 });
  24 |
  25 |   });
  26 |
  27 |
  28 | //});
  29 |
  30 |
  31 |
```